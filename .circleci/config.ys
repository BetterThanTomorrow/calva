--- !yamlscript/v0/

version: 2

jobs::
  reduce:
    fn [map job]:
      assoc map job:
        load: "jobs/$job.yaml"
    =>: .{}
    load: 'jobs.yaml'


workflows:
  version: 2

  calva-io-build::  load('workflows/calva-io-build.yaml')

  # We have two Calva build workflows, because for some reason the tag filter need to be on all jobs...
  build-test::      load('workflows/build-test.yaml')
  release-publish:: load('workflows/release-publish.yaml')
