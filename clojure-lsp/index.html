
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Learn about how Calva leverages clojure-lsp for a lot of the features you love">
      
      
      
        <link rel="canonical" href="https://calva.io/clojure-lsp/">
      
      
        <link rel="prev" href="../notebooks/">
      
      
        <link rel="next" href="../nrepl_and_cider-nrepl/">
      
      
        
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.3+insiders-4.27.1">
    
    
      
        <title>clojure-lsp - Calva User Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.38fd6ec5.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-69796730-5","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="clojure-lsp - Calva User Guide" >
      
        <meta  property="og:description"  content="Learn about how Calva leverages clojure-lsp for a lot of the features you love" >
      
        <meta  property="og:image"  content="https://calva.io/assets/images/social/clojure-lsp.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://calva.io/clojure-lsp/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="clojure-lsp - Calva User Guide" >
      
        <meta  name="twitter:description"  content="Learn about how Calva leverages clojure-lsp for a lot of the features you love" >
      
        <meta  name="twitter:image"  content="https://calva.io/assets/images/social/clojure-lsp.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#clojure-lsp" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Calva User Guide" class="md-header__button md-logo" aria-label="Calva User Guide" data-md-component="logo">
      
  <img src="../img/calva-symbol-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Calva User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              clojure-lsp
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/BetterThanTomorrow/calva" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Calva
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Calva User Guide" class="md-nav__button md-logo" aria-label="Calva User Guide" data-md-component="logo">
      
  <img src="../img/calva-symbol-white.svg" alt="logo">

    </a>
    Calva User Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/BetterThanTomorrow/calva" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Calva
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Clojure Interactive Programming for Visual Studio Code
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
        
          <label class="md-nav__link" for="__nav_2" tabindex="0" aria-expanded="false">
            
  
  <span class="md-ellipsis">
    
  
    Start Here
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="Start Here" data-md-level="1">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Start Here
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Get Started with Calva
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../connect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Connect the REPL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../try-first/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Try this First
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../finding-commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Finding Calva Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../eval-tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Evaluate Clojure Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../why-calva/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Why you should consider Calva
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" tabindex="0" aria-expanded="false">
            
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="Features" data-md-level="1">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../commands-top10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The Top 10 Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Evaluate Clojure Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../rich-comments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Rich Comments Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../clojuredocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    ClojureDocs Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../output/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The Output/REPL Window
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../formatting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Clojure Formatting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../paredit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Paredit, a Visual Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../debugger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Debugger
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pprint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Pretty Printing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../refactoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Refactoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../test-runner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Test Runner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../syntax-highlighting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Clojure Syntax Highlighting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../connect-sequences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Custom REPL Connect Sequences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../custom-commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Custom REPL Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../linting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Superb Clojure Linting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../namespace-form-auto-creation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Namespace Form Auto-creation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Clojure Notebooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    
  
    clojure-lsp
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    
  
    clojure-lsp
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-lsp-server-starts-automatically" class="md-nav__link">
    <span class="md-ellipsis">
      
        The LSP server starts automatically
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lsp-server-process-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        LSP server process control
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LSP server process control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#active-clojure-lsp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Active clojure-lsp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopped-clojure-lsp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Stopped clojure-lsp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloading-and-starting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Downloading and starting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ignoring-lsp-cache-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ignoring LSP cache files
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-the-version-of-clojure-lsp-used-by-calva" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changing the Version of Clojure-lsp Used by Calva
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-custom-clojure-lsp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using a Custom Clojure-lsp
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clojure-lsp-drag-fwdback" class="md-nav__link">
    <span class="md-ellipsis">
      
        clojure-lsp drag fwd/back
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#viewing-the-logs-between-the-client-and-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Viewing the Logs Between the Client and Server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-info-command" class="md-nav__link">
    <span class="md-ellipsis">
      
        Server Info Command
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opening-the-server-log-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Opening the Server Log File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leiningen-project-in-subfolder" class="md-nav__link">
    <span class="md-ellipsis">
      
        Leiningen project in subfolder
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../nrepl_and_cider-nrepl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    nREPL and cider-nrepl
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../customizing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Customizing Calva
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
        
          <label class="md-nav__link" for="__nav_8" tabindex="0" aria-expanded="false">
            
  
  <span class="md-ellipsis">
    
  
    Using Calva with ...
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="Using Calva with ..." data-md-level="1">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Using Calva with ...
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../wsl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    WSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../remote-development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    VS Code Remote Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../live-share/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Live Share
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../vim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    VIM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reveal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Reveal
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../babashka/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Babashka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../nbb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    nbb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../joyride/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Joyride
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../clojuredart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    ClojureDart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../luminus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Luminus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../re-frame-template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The re-frame template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../polylith/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Polylith
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../krell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Krell
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../rebl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    REBL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../static-only/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Static Calva
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../parinfer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Parinfer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
        
          <label class="md-nav__link" for="__nav_9" tabindex="0" aria-expanded="false">
            
  
  <span class="md-ellipsis">
    
  
    Tips and Tricks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="Tips and Tricks" data-md-level="1">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tips and Tricks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../emacs-keybindings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Emacs Keybindings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../workspace-layouts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Workspace Layouts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../quirks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Quirks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../async-out/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Viewing Async Output with Shadow-CLJS and Node
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../clj-java-decompiler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Add custom commands for decompiling generated Clojure code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Extension API
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
        
          <label class="md-nav__link" for="__nav_11" tabindex="0" aria-expanded="false">
            
  
  <span class="md-ellipsis">
    
  
    In Depth
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="In Depth" data-md-level="1">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    In Depth
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../jack-in-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The Jack-in Academy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
        
          <label class="md-nav__link" for="__nav_12" tabindex="0" aria-expanded="false">
            
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="Guides" data-md-level="1">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../get-started-with-clojure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Get Started with Clojure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../tao/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The Tao of Calva
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Contribute to Calva
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../sponsors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Calva Sponsors
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../merch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Calva T-shirts and Stickers!
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-lsp-server-starts-automatically" class="md-nav__link">
    <span class="md-ellipsis">
      
        The LSP server starts automatically
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lsp-server-process-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        LSP server process control
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LSP server process control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#active-clojure-lsp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Active clojure-lsp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopped-clojure-lsp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Stopped clojure-lsp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloading-and-starting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Downloading and starting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ignoring-lsp-cache-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ignoring LSP cache files
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-the-version-of-clojure-lsp-used-by-calva" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changing the Version of Clojure-lsp Used by Calva
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-custom-clojure-lsp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using a Custom Clojure-lsp
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clojure-lsp-drag-fwdback" class="md-nav__link">
    <span class="md-ellipsis">
      
        clojure-lsp drag fwd/back
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#viewing-the-logs-between-the-client-and-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Viewing the Logs Between the Client and Server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-info-command" class="md-nav__link">
    <span class="md-ellipsis">
      
        Server Info Command
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opening-the-server-log-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Opening the Server Log File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leiningen-project-in-subfolder" class="md-nav__link">
    <span class="md-ellipsis">
      
        Leiningen project in subfolder
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="clojure-lsp">Clojure-lsp</h1>
<p>Calva uses a mix of static and dynamic analysis to power the experience. A lot of the static abilities come from <a href="https://github.com/snoe/clojure-lsp">clojure-lsp</a>. This enables you to check something up in a project, with a lot of navigational and contextual support, without starting a REPL for it. (And once you do start a REPL you'll get even more capabilities, enabled by the dynamic analysis.)</p>
<div class="admonition note">
<p class="admonition-title">Which clojure-lsp does Calva use?</p>
<p>Calva defaults to using the <code>latest</code> clojure-lsp released. To use a different version of clojure-lsp, see the <a href="#configuration">configuration</a> section. <strong>Calva does not use the clojure-lsp installed on your system, unless you <a href="#using-a-custom-clojure-lsp-native-binary">set the path for clojure-lsp</a> to the installed binary in your settings</strong>. You can see what version is being used by running the <code>Clojure-lsp Server Info</code> command, which will also show the version of clj-kondo that's being used as well as other info. </p>
</div>
<h2 id="the-lsp-server-starts-automatically">The LSP server starts automatically</h2>
<p>Unless you set <code>calva.enableClojureLspOnStart</code> to <code>false</code>, Calva will automatically start clojure-lsp. And you won't need to install antyting, because Calva handles that. It can take a while for clojure-lsp to start, especially the first time for a new project, when clojure-lsp (via <code>clj-kondo</code>) indexes the project files.</p>
<h2 id="lsp-server-process-control">LSP server process control</h2>
<p>It is highly recommended to let clojure-lsp start automatically, and most often you can just let it do its wonderful magic without bothering with it. There are times when you might want to control and inspect the process, though. Calva has commands for:</p>
<ul>
<li>Inspecting the clojure-lsp server information</li>
<li>Read the clojure-lsp server log</li>
<li>Stopping clojure-lsp</li>
<li>Starting clojure-lsp</li>
<li>Restarting clojure-lsp</li>
<li>Download the configured clojure-lsp version</li>
</ul>
<p>In the status bar, Calva will show an indicator with the clojure-lsp status.</p>
<h3 id="active-clojure-lsp">Active clojure-lsp</h3>
<p>When clojure-lsp is downloaded, started and initialized the status bar indicator will look like so:</p>
<p><img alt="&quot;Active clojure-lsp status bar item&quot;" src="../images/clojure-lsp/calva-clojure-lsp-statusbar-active.png" title="Active clojure-lsp status bar item" /></p>
<p>Clicking the item will bring up this menu:</p>
<p><img alt="&quot;Active clojure-lsp menu&quot;" src="../images/clojure-lsp/calva-clojure-lsp-menu-active.png" title="Active clojure-lsp menu" /></p>
<p>See below about the <a href="#server-info-command">server info</a> and <a href="#opening-the-server-log-file">server log</a> commands.</p>
<h3 id="stopped-clojure-lsp">Stopped clojure-lsp</h3>
<p>When clojure-lsp is stopped the status bar indicator will look like so:</p>
<p><img alt="&quot;Inactive clojure-lsp status bar item&quot;" src="../images/clojure-lsp/calva-clojure-lsp-statusbar-inactive.png" title="Inactive clojure-lsp status bar item" /></p>
<p>The clojure-lsp inactive menu:</p>
<p><img alt="&quot;Inactive clojure-lsp  menu&quot;" src="../images/clojure-lsp/calva-clojure-lsp-menu-inactive.png" title="Inactive clojure-lsp menu" /></p>
<p>The download option here will download the configured clojure-lsp version regardless if it is already installed or not. This can be useful when some earlier download has failed resulting in that clojure-lsp can't be started. <em>NB: It will not download anything if <code>calva.clojureLspPath</code> is set to something non-blank.</em></p>
<h3 id="downloading-and-starting">Downloading and starting</h3>
<p>The statusbar item also will indicate when clojure-lsp is being downloaded and while it is starting.</p>
<h2 id="ignoring-lsp-cache-files">Ignoring LSP cache files</h2>
<p>Clojure-lsp stores its project analysis information in your project. Git users can add these lines to their project root directory <code>.gitignore</code>:</p>
<div class="highlight"><pre><span></span><code>.clj-kondo/cache/
.clj-kondo/.cache/
.lsp/sqlite.*.db
</code></pre></div>
<h2 id="configuration">Configuration</h2>
<p>For information about how to configure clojure-lsp, see the <a href="https://clojure-lsp.github.io/clojure-lsp/settings/">settings</a> page of the clojure-lsp docs.</p>
<h3 id="changing-the-version-of-clojure-lsp-used-by-calva">Changing the Version of Clojure-lsp Used by Calva</h3>
<p>By default, Calva will use the latest released <strong>clojure-lsp</strong>. You can change the version of clojure-lsp used by Calva by setting the <code>calva.clojureLspVersion</code> property to a version of clojure-lsp found in its GitHub <a href="https://github.com/clojure-lsp/clojure-lsp/releases">releases</a>. This can be helpful if you're debugging an issue with clojure-lsp or you want to try out a feature of a new release that Calva does not yet use. However, you must remember to reset this setting in order for Calva to automatically use newer versions of clojure-lsp that are released with new versions of Calva.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;calva.clojureLspVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021.04.07-16.34.10&quot;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Special ”version” values</p>
<p>Apart from the actual versions you can use two special values for this setting:</p>
<ul>
<li><code>latest</code>: Will download and use the latest stable build of clojure-lsp, when one becomes available. This is the default</li>
<li><code>nightly</code>: Will always download and use the latest nightly build, <em>whether there is a new version available or not</em>.</li>
</ul>
</div>
<h3 id="using-a-custom-clojure-lsp">Using a Custom Clojure-lsp</h3>
<p>You can set a path to a custom clojure-lsp to be used by Calva by configuring the <code>calva.clojureLspPath</code> setting. This should be an absolute path to a native binary or JAR file.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;calva.clojureLspPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/usr/local/bin/clojure-lsp&quot;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Will override any <code>calva.clojureLspVersion</code> setting</p>
<p>When <code>calva.clojureLspPath</code> is set, the binary at the path will be used uncoditionally, and the <code>calva.clojureLspVersion</code> setting will be ignored.</p>
</div>
<h2 id="clojure-lsp-drag-fwdback">clojure-lsp drag fwd/back</h2>
<p>clojure-lsp contributes two commands for dragging forms forward or backward. They are similar to Calva's <a href="../paredit/">Paredit</a> corresponding commands.</p>
<div class="admonition warning">
<p class="admonition-title">Experimental</p>
<p>Consider the addition of these commands to the command palette as an experimental feature. We might remove the commands later if they cause confusion or if Calva's commands improve about contextual support.</p>
</div>
<p>There are reasons you might prefer the clojure-lsp versions over the Calva built-ins:</p>
<ul>
<li>Better comment affinity. Comments stay affiliated with clauses as they're dragged.</li>
<li>Better contextual support. In addition to the <a href="#drag-bindings-forwardbackward">bindings mentioned below</a>, also <code>assoc</code>, <code>case</code>, <code>cond</code>, and some more forms get adapted drag treatment.</li>
</ul>
<p>There are also reasons why you might want to stick with Calva's built-ins. See <a href="https://github.com/BetterThanTomorrow/calva/pull/1698">this PR</a> and its links for a detailed discussion of the differences. TL;DR:</p>
<ul>
<li>clojure-lsp is not active in all Calva Clojure files, the <a href="../output/">REPL/output window</a> being an extra noticeable example. If you bind the clojure-lsp commands in a way that replaces the key bindings for Calva's drag commands, add <code>&amp;&amp; !calva:outputWindowActive</code> to the <code>when</code> clause.</li>
<li>clojure-lsp does not honor Calva's <a href="https://www.youtube.com/watch?v=8ygw7LLLU1w">Current Form</a> semantics. You might be in for some surprises in what gets dragged.</li>
<li>The cursor does not stay in place within the dragged form when dragging, breaking with how all Paredit edit commands work, and with how VS Code built in drag-line works.</li>
<li>Performance is not as as good as Calva's built-ins. This gets noticeable in large files.</li>
<li>Semantic token styling gets out-of-wack, leaving symbols having several stylings and other artifacts. (With Calva's commands, the styling gets invalidated for the current enclosing form, which looks less jarring.)</li>
</ul>
<p>To use the clojure-lsp commands, search for "clojure-lsp drag" in the command palette or the keyboard shortcut preferences menu, or choose them from the <em>Quick Fix</em> suggestion lightbulb.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="viewing-the-logs-between-the-client-and-server">Viewing the Logs Between the Client and Server</h3>
<p>If something doesn't seem to be working correctly, and you suspect the issue is related to clojure-lsp, a good place to start investigating is the request and response logs between the LSP client and server. In your settings, set <code>clojure.trace.server</code> to <code>verbose</code>, then in the VS Code output tab, select the <code>Clojure Language Client</code> output channel.</p>
<p><img alt="&quot;Clojure trace server setting&quot;" src="../images/clojure-lsp/trace-server-setting.png" title="Clojure trace server setting" /></p>
<p>It may be helpful to clear the output channel, then perform the action with which you're experiencing a problem, then read through the log for clues or paste the logs into a related issue in the Calva repo.</p>
<h3 id="server-info-command">Server Info Command</h3>
<p>You can run the <code>Clojure-lsp Server Info</code> command to get information about the running clojure-lsp server, such as the version the server being used, the version of clj-kondo it's using, and more. This info is printed to the "Calva says" output channel.</p>
<h3 id="opening-the-server-log-file">Opening the Server Log File</h3>
<p>You can open the clojure-lsp log file by running the command <code>Calva Diagnostics: Open Clojure-lsp Log File</code>. The log file will only be opened with this command if the clojure-lsp server is running and has finished initializing. If you need to open the file when the server is failing to run or initialize, see the <a href="https://clojure-lsp.io/troubleshooting/#server-log">clojure-lsp docs</a> for information on the file location.</p>
<h3 id="leiningen-project-in-subfolder">Leiningen project in subfolder</h3>
<p>Sometimes your Leiningen project root with its <code>project.clj</code> is located in a subfolder and not directly inside your repository root:</p>
<div class="highlight"><pre><span></span><code>- reporoot
  - subfolder (= project root)
    - project.clj
  - otherstuff
  - .git
</code></pre></div>
<p>In such cases, when opening the folder <code>reporoot</code>, clojure-lsp doesn't help you. There are two workarounds:</p>
<p>First, if you do need access to <code>otherstuff</code> inside <code>reporoot</code>, you can:</p>
<ol>
<li>open folder <code>reporoot</code></li>
<li><strong>File -&gt; Add Folder to Workspace...</strong></li>
<li>Add the <code>subfolder</code></li>
<li>The File Explorer now shows 2 project roots: drag the <code>subfolder</code> root above the <code>reporoot</code> root.</li>
</ol>
<p>Save the resulting Workspace to not have to repeat these steps.</p>
<p>The second option, if you don't need access to <code>otherstuff</code> inside <code>reporoot</code>, is to just open the folder <code>subfolder</code> instead. </p>
<h2 id="related">Related</h2>
<p>See also:</p>
<ul>
<li><a href="../connect/">Connecting the REPL</a></li>
<li><a href="../refactoring/">Refactoring</a></li>
</ul>

  
  



  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.tabs.link"], "search": "../assets/javascripts/workers/search.f236eb64.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.abfe3e55.min.js"></script>
      
    
  </body>
</html>