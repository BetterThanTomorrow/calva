
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Calva comes with a powerful expression-based debugger, inspired by, and using the same underlying libraries as, CIDER's debugger">
      
      
      
        <link rel="canonical" href="https://calva.io/debugger/">
      
      
        <link rel="prev" href="../paredit/">
      
      
        <link rel="next" href="../pprint/">
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.8">
    
    
      
        <title>Debugger - Calva User Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ded33207.min.css">
      
      

    
    
  
  
    <script defer data-domain="calva.io" src="https://plausible.io/js/script.js"></script>
  

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-69796730-5","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Debugger - Calva User Guide" >
      
        <meta  property="og:description"  content="Calva comes with a powerful expression-based debugger, inspired by, and using the same underlying libraries as, CIDER's debugger" >
      
        <meta  property="og:image"  content="https://calva.io/assets/images/social/debugger.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://calva.io/debugger/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Debugger - Calva User Guide" >
      
        <meta  name="twitter:description"  content="Calva comes with a powerful expression-based debugger, inspired by, and using the same underlying libraries as, CIDER's debugger" >
      
        <meta  name="twitter:image"  content="https://calva.io/assets/images/social/debugger.png" >
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#debugger" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Calva User Guide" class="md-header__button md-logo" aria-label="Calva User Guide" data-md-component="logo">
      
  <img src="../img/calva-symbol-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Calva User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Debugger
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/BetterThanTomorrow/calva" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Calva
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Calva User Guide" class="md-nav__button md-logo" aria-label="Calva User Guide" data-md-component="logo">
      
  <img src="../img/calva-symbol-white.svg" alt="logo">

    </a>
    Calva User Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/BetterThanTomorrow/calva" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Calva
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Clojure Interactive Programming for Visual Studio Code
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Start Here
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Start Here
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Get Started with Calva
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../connect/" class="md-nav__link">
        Connect the REPL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../try-first/" class="md-nav__link">
        Try this First
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../finding-commands/" class="md-nav__link">
        Finding Calva Commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../eval-tips/" class="md-nav__link">
        Evaluate Clojure Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../why-calva/" class="md-nav__link">
        Why you should consider Calva
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands-top10/" class="md-nav__link">
        The Top 10 Commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        Evaluate Clojure Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rich-comments/" class="md-nav__link">
        Rich Comments Support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clojuredocs/" class="md-nav__link">
        ClojureDocs Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../output/" class="md-nav__link">
        The Output/REPL Window
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../formatting/" class="md-nav__link">
        Clojure Formatting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../paredit/" class="md-nav__link">
        Paredit, a Visual Guide
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Debugger
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Debugger
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    Features
  </a>
  
    <nav class="md-nav" aria-label="Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current" class="md-nav__link">
    Current
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-goals" class="md-nav__link">
    Future goals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    Dependencies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-debugger" class="md-nav__link">
    Using the Debugger
  </a>
  
    <nav class="md-nav" aria-label="Using the Debugger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instrumenting-a-function" class="md-nav__link">
    Instrumenting a Function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-breakpoints-with-break" class="md-nav__link">
    Setting Breakpoints with #break
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-breakpoints" class="md-nav__link">
    Conditional Breakpoints
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instrumenting-a-form-with-dbg" class="md-nav__link">
    Instrumenting a Form with #dbg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluating-code-in-the-paused-context" class="md-nav__link">
    Evaluating Code in the Paused Context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewing-variable-values" class="md-nav__link">
    Viewing Variable Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewing-the-call-stack" class="md-nav__link">
    Viewing the Call Stack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stepping-commands" class="md-nav__link">
    Stepping Commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    Caveats
  </a>
  
    <nav class="md-nav" aria-label="Caveats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breakpoints-in-looprecur" class="md-nav__link">
    Breakpoints in loop/recur
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-the-file-and-eval-on-save" class="md-nav__link">
    Loading the File and "Eval On Save"
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugger-hangs-when-stepping-over-infinite-seqs" class="md-nav__link">
    Debugger hangs when stepping over infinite seqs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#my-breakpoint-isnt-being-hit" class="md-nav__link">
    My breakpoint isn't being hit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#my-breakpoint-in-a-test-isnt-being-hit" class="md-nav__link">
    My breakpoint in a test isn't being hit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-reader-function-for-tag-error" class="md-nav__link">
    "No reader function for tag" error
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#passing-options-to-the-repl-jvm" class="md-nav__link">
    Passing options to the REPL JVM
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pprint/" class="md-nav__link">
        Pretty Printing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../refactoring/" class="md-nav__link">
        Refactoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test-runner/" class="md-nav__link">
        Test Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../syntax-highlighting/" class="md-nav__link">
        Clojure Syntax Highlighting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../connect-sequences/" class="md-nav__link">
        Custom REPL Connect Sequences
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom-commands/" class="md-nav__link">
        Custom REPL Commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linting/" class="md-nav__link">
        Superb Clojure Linting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../namespace-form-auto-creation/" class="md-nav__link">
        Namespace Form Auto-creation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/" class="md-nav__link">
        Clojure Notebooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hiccup/" class="md-nav__link">
        Converting HTML to Hiccup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../clojure-lsp/" class="md-nav__link">
        clojure-lsp
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../nrepl_and_cider-nrepl/" class="md-nav__link">
        nREPL and cider-nrepl
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../customizing/" class="md-nav__link">
        Customizing Calva
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Using Calva with ...
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Using Calva with ...
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsl/" class="md-nav__link">
        WSL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../remote-development/" class="md-nav__link">
        VS Code Remote Development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../live-share/" class="md-nav__link">
        Live Share
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vim/" class="md-nav__link">
        VIM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reveal/" class="md-nav__link">
        Reveal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../babashka/" class="md-nav__link">
        Babashka
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nbb/" class="md-nav__link">
        nbb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../joyride/" class="md-nav__link">
        Joyride
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clojuredart/" class="md-nav__link">
        ClojureDart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../luminus/" class="md-nav__link">
        Luminus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../re-frame-template/" class="md-nav__link">
        The re-frame template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../polylith/" class="md-nav__link">
        Polylith
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../krell/" class="md-nav__link">
        Krell
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rebl/" class="md-nav__link">
        REBL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../parinfer/" class="md-nav__link">
        Parinfer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          Tips and Tricks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Tips and Tricks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../emacs-keybindings/" class="md-nav__link">
        Emacs Keybindings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workspace-layouts/" class="md-nav__link">
        Workspace Layouts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quirks/" class="md-nav__link">
        Quirks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../async-out/" class="md-nav__link">
        Viewing Async Output with Shadow-CLJS and Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clj-java-decompiler/" class="md-nav__link">
        Add custom commands for decompiling generated Clojure code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        Extension API
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
      
      
      
        <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
          In Depth
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          In Depth
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jack-in-guide/" class="md-nav__link">
        The Jack-in Academy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
      
      
      
        <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../get-started-with-clojure/" class="md-nav__link">
        Get Started with Clojure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tao/" class="md-nav__link">
        The Tao of Calva
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contribute/" class="md-nav__link">
        Contribute to Calva
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sponsors/" class="md-nav__link">
        Calva Sponsors
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../merch/" class="md-nav__link">
        Calva T-shirts and Stickers!
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    Features
  </a>
  
    <nav class="md-nav" aria-label="Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current" class="md-nav__link">
    Current
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-goals" class="md-nav__link">
    Future goals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    Dependencies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-debugger" class="md-nav__link">
    Using the Debugger
  </a>
  
    <nav class="md-nav" aria-label="Using the Debugger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instrumenting-a-function" class="md-nav__link">
    Instrumenting a Function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-breakpoints-with-break" class="md-nav__link">
    Setting Breakpoints with #break
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-breakpoints" class="md-nav__link">
    Conditional Breakpoints
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instrumenting-a-form-with-dbg" class="md-nav__link">
    Instrumenting a Form with #dbg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluating-code-in-the-paused-context" class="md-nav__link">
    Evaluating Code in the Paused Context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewing-variable-values" class="md-nav__link">
    Viewing Variable Values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewing-the-call-stack" class="md-nav__link">
    Viewing the Call Stack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stepping-commands" class="md-nav__link">
    Stepping Commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    Caveats
  </a>
  
    <nav class="md-nav" aria-label="Caveats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breakpoints-in-looprecur" class="md-nav__link">
    Breakpoints in loop/recur
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-the-file-and-eval-on-save" class="md-nav__link">
    Loading the File and "Eval On Save"
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugger-hangs-when-stepping-over-infinite-seqs" class="md-nav__link">
    Debugger hangs when stepping over infinite seqs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#my-breakpoint-isnt-being-hit" class="md-nav__link">
    My breakpoint isn't being hit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#my-breakpoint-in-a-test-isnt-being-hit" class="md-nav__link">
    My breakpoint in a test isn't being hit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-reader-function-for-tag-error" class="md-nav__link">
    "No reader function for tag" error
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#passing-options-to-the-repl-jvm" class="md-nav__link">
    Passing options to the REPL JVM
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="debugger">Debugger</h1>
<p>Calva comes with a powerful expression-based debugger, inspired by <a href="https://cider.mx/">Cider</a>'s debugger, and using the same underlying library, <a href="https://github.com/clojure-emacs/cider-nrepl">cider-nrepl</a>. We hope you love it!</p>
<p><img alt="Debugger demonstration: stepping through an instrumented function" src="../images/debugger/stepping.gif" title="Debugger demonstration: stepping through an instrumented function" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The debugger currently does not support ClojureScript. Calva's debugger utilizes cider-nrepl for debugging. See <a href="https://github.com/clojure-emacs/cider/issues/1416">this Cider issue</a> for more information.</p>
</div>
<h2 id="features">Features</h2>
<h3 id="current">Current</h3>
<ul>
<li>Instrument functions for debugging with <code>ctrl+alt+c i</code></li>
<li>Instrument a function manually with <code>#dbg</code> (as opposed to the above command)</li>
<li>Set individual breakpoints with <code>#break</code></li>
<li>Continue to next breakpoint</li>
<li>Step over form</li>
<li>Step into form</li>
<li>Step out of form</li>
<li>Evaluate code in the debug context</li>
<li>See variable values in the debugger side pane</li>
<li>See variable values on hover in the editor</li>
</ul>
<h3 id="future-goals">Future goals</h3>
<ul>
<li>See structured variables in the debugger side pane (currently maps and collections are just shown as strings)</li>
<li>Inject values into the debug context</li>
<li>Trace: continue, printing expressions and their values</li>
</ul>
<h2 id="dependencies">Dependencies</h2>
<p>The debugger itself relies pretty heavily on <a href="https://github.com/clojure-emacs/cider-nrepl">cider-nrepl</a>, as do other parts of Calva. This library is loaded as a dependency when you use Calva Jack-in. If you are not using Calva Jack-in, you can add these dependencies in your project definition or user profile. See the <a href="../jack-in-guide/">Calva Jack-in guide</a> for more information.</p>
<h2 id="using-the-debugger">Using the Debugger</h2>
<p>If you're new to Clojure or expression-based debuggers, this debugger may function differently than what you're used to. Instead of placing breakpoints in the side margin and then hitting F5 to start debugging, you instead use Clojure reader tags, <code>#break</code> and <code>#dbg</code>, to denote breakpoints anywhere in a Clojure form. When you evaluate a call to a function that has been evaluated with that reader tag, the debugger will start when execution reaches the first breakpoint. There's also a convenience command to instrument functions. Read below about both options.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The debugger is not configured via a <code>launch.json</code> file, and is not started in the same way as you may be used to when working with other languages in VS Code. The debugger is used by way of the REPL. If you are new to Clojure, please visit the <a href="../getting-started/">Getting Started</a> section of the documentation and get familiar with evaluating code using the REPL before using the debugger.</p>
</div>
<h3 id="instrumenting-a-function">Instrumenting a Function</h3>
<p>You can instrument a top level function for debugging with <code>ctrl+alt+c i</code>. This places invisible breakpoints throughout the function where pausing makes sense. When you evaluate a call to this function, the debugger will start and execution will pause at the first breakpoint. Annotations show the value of the form at the cursor.</p>
<p>A border is placed around the definition of the instrumented function and its references to show that it's instrumented. You can remove instrumentation by evaluating the function again normally, such as with <code>alt+enter</code>.</p>
<p><img alt="Instrumenting a function" src="../images/debugger/instrumenting-a-function.gif" title="Instrumenting a function" /></p>
<h3 id="setting-breakpoints-with-break">Setting Breakpoints with <code>#break</code></h3>
<p>You can insert a breakpoint manually into any code by placing a <code>#break</code> in front of the form where you want execution to pause, and then evaluating the top level form with <code>alt+enter</code>. When you evaluate a call to this code the VS Code debugger will start, the cursor will move to right after the form that's preceded by <code>#break</code>, and the line will be highlighted to show execution is paused there.</p>
<p><img alt="Setting a breakpoint with #break" src="../images/debugger/break.gif" title="Setting a breakpoint with #break" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Code will be executed up to and <em>including</em> the form after the breakpoint.</p>
</div>
<h3 id="conditional-breakpoints">Conditional Breakpoints</h3>
<p>You can set conditional breakpoints by adding metadata before the form that the <code>#break</code> applies to.</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">print-nums</span><span class="w"> </span><span class="p">[</span><span class="nv">n</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nb">dotimes </span><span class="p">[</span><span class="nv">i</span><span class="w"> </span><span class="nv">n</span><span class="p">]</span>
<span class="w">    </span><span class="o">#</span><span class="nv">break</span><span class="w"> </span><span class="o">^</span><span class="p">{</span><span class="ss">:break/when</span><span class="w"> </span><span class="p">(</span><span class="nb">= </span><span class="nv">i</span><span class="w"> </span><span class="mi">7</span><span class="p">)}</span><span class="w"> </span><span class="c1">;; This breakpoint will only be hit when i equals 7</span>
<span class="w">    </span><span class="p">(</span><span class="nb">prn </span><span class="nv">i</span><span class="p">)))</span>
</code></pre></div>
<h3 id="instrumenting-a-form-with-dbg">Instrumenting a Form with <code>#dbg</code></h3>
<p>Adding <code>#dbg</code> before a form then evaluating the form with <code>alt+enter</code> will instrument the form. This has the same effect as using <a href="#instrumenting-a-function">the instrument command</a>.</p>
<p><img alt="Instrumenting a form" src="../images/debugger/dbg-form.gif" title="Instrumenting a non-function form" /></p>
<p><img alt="Instrumenting a function" src="../images/debugger/dbg-function.gif" title="Instrumenting a function" /></p>
<h3 id="evaluating-code-in-the-paused-context">Evaluating Code in the Paused Context</h3>
<p>When execution is paused at a breakpoint, you can evaluate code in that context. This can be done in the editor or in the REPL window, as usual.</p>
<p><img alt="Evaluating code in the paused context from the editor" src="../images/debugger/eval-editor.gif" title="Evaluating code in the paused context from the editor" /></p>
<h3 id="viewing-variable-values">Viewing Variable Values</h3>
<p>While debugging, you can view the values of variables in VS Code's debugger side pane. You can also view values by hovering over the variables in the editor. Currently, values for collections and maps are shown as strings, but we plan to make them structured in the future. For now, if you want to see the value of a large structured variable, you can evaluate the variable from the editor or from the REPL window.</p>
<p><img alt="Viewing variable values in the side pane" src="../images/debugger/viewing-variable-values.png" title="Viewing variable values in the side pane" /></p>
<h3 id="viewing-the-call-stack">Viewing the Call Stack</h3>
<p>While debugging, you can view the call stack in VS Code's call stack side pane. Clicking the stack frames will show the related line of code in an editor.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may only see one stack frame in the call stack side pane, as the change for adding additional frames was rolled back due to an issue. You can follow the change for this at <a href="https://github.com/BetterThanTomorrow/calva/issues/1150">#1150</a>.</p>
</div>
<p><img alt="Debugger call stack" src="../images/debugger/debugger-call-stack.gif" title="Viewing the call stack" /></p>
<h3 id="stepping-commands">Stepping Commands</h3>
<p>You can use VS Code's debugger UI to advance execution while debugging.</p>
<p><img alt="VS Code's debugger navigation buttons" src="../images/debugger/navigation-buttons.png" title="VS Code's debugger navigation buttons" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Clicking restart does nothing, since this functionality does not make sense for our debugger.</p>
</div>
<ul>
<li><strong>Continue</strong> - Continues without stopping for the current breakpoint</li>
<li><strong>Step over</strong> - Continues to the next breakpoint</li>
<li><strong>Step in</strong> - Steps in to the function about to be called. If the next breakpoint is not around a function call, does the same as next. Note that not all functions can be stepped in to - only normal functions stored in vars, for which cider-nrepl can find the source. You cannot currently step in to multimethods, protocol functions, or functions in clojure.core (although multimethods and protocols can be instrumented manually).</li>
<li><strong>Step out</strong> - Steps to the next breakpoint that is outside of the current sexp</li>
<li><strong>Restart</strong> - Does nothing. To restart debugging, you can hit disconnect or continue execution through the final result, then re-evaluate the expression that started the debugger.</li>
<li><strong>Disconnect</strong> - Disconnects the debugger</li>
</ul>
<h2 id="caveats">Caveats</h2>
<h3 id="breakpoints-in-looprecur">Breakpoints in loop/recur</h3>
<p>One construct where the debugger is limited is <code>loop</code>/<code>recur</code>. As recur always has to appear in a tail-position inside a <code>loop</code> or a <code>fn</code> and the debugger uses macros to interleave breakpoints in the forms, it <strong>might</strong> happen that a <code>recur</code> no longer appears in a tail position. In that case we have to avoid setting up the breakpoint. An example of such a case is:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="k">loop </span><span class="p">[</span><span class="nv">i</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">  </span><span class="o">#</span><span class="nv">break</span>
<span class="w">  </span><span class="p">(</span><span class="nb">when </span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">i</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">println </span><span class="nv">i</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nf">recur</span><span class="w"> </span><span class="p">(</span><span class="nb">inc </span><span class="nv">i</span><span class="p">))))</span>
</code></pre></div>
<p>Here the breakpoint is exactly in front of a form that contains as its last expression a <code>recur</code> which is wrapped in a loop. This breakpoint has no effect. This does not mean you cannot use the debugger with <code>loop</code>, it just means you have to set your debug statements more carefully.</p>
<h3 id="loading-the-file-and-eval-on-save">Loading the File and "Eval On Save"</h3>
<p>When you load a file, any breakpoints that were previously set in functions will be unset. If you have the "Eval On Save" setting enabled, your file is also loaded with each save, therefore saving the file will remove breakpoints previously set.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="debugger-hangs-when-stepping-over-infinite-seqs">Debugger hangs when stepping over infinite seqs</h3>
<p>This is because the debugger tries to evaluate the form when it's stepped over, and if <code>clojure.core/*print-length*</code> is set to <code>nil</code> as it is by default, evaluation will never complete. If you want to debug a form with an infinite seq, make sure to set <code>*print-length*</code> beforehand. For example:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="nf">set!</span><span class="w"> </span><span class="nv">*print-length*</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="c1">;; Or, to be more precise</span>
<span class="p">(</span><span class="nf">set!</span><span class="w"> </span><span class="nv">clojure.core/*print-length*</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<p>Calva does not set this for you during debug mode, instead leaving it up to you to decide the value.</p>
<h3 id="my-breakpoint-isnt-being-hit">My breakpoint isn't being hit</h3>
<p>It's likely that your breakpoint is in a place that cider-nrepl does not see as an appropriate place to break execution. For example, if you put a breakpoint before a literal number, it will not be hit, because there's no need to show the value of a literal.</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">simple</span><span class="w"> </span><span class="p">[</span><span class="nv">x</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nb">+ </span><span class="mi">1</span><span class="w"> </span><span class="o">#</span><span class="nv">break</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="c1">;; This breakpoint will not be hit</span>
</code></pre></div>
<p>Another possible issue is that you're loading the file again after setting breakpoints, which unsets them. See <a href="#loading-the-file-and-eval-on-save">Loading the File and "Eval On Save"</a> under Caveats.</p>
<h3 id="my-breakpoint-in-a-test-isnt-being-hit">My breakpoint in a test isn't being hit</h3>
<p>If you're using the test commands like "Run current test" to run your tests, breakpoints will not be hit. This is because Calva loads the file before running the tests to make sure the latest version of test code is being run, and when the file is loaded, breakpoints are unset.</p>
<p>If you want a breakpoint to work within the test, evaluate the test form with a breakpoint tag in it, then call the test directly.</p>
<p><img alt="Hitting a breakpoint in a test" src="../images/debugger/breakpoint-in-test.png" title="Hitting a breakpoint in a test" /></p>
<h3 id="no-reader-function-for-tag-error">"No reader function for tag" error</h3>
<p>If you get an error like this, it's likely that you connected to a REPL instead of jacking in, and you don't have the proper dependencies loaded in your REPL. You can run the command "Copy Jack-in Command Line to Clipboard" to see what command would be run if you jacked in.</p>
<p>Most importantly, make sure you have <code>cider/cider-nrepl</code> as a dependency, and <code>cider.nrepl/cider-middleware</code> as middleware loaded in your REPL. For example, this is a jack-in command line for a deps.edn project:</p>
<div class="highlight"><pre><span></span><code>clojure<span class="w"> </span>-Sdeps<span class="w"> </span><span class="s1">&#39;{:deps {nrepl/nrepl {:mvn/version,&quot;0.8.3&quot;},cider/cider-nrepl {:mvn/version,&quot;0.25.8&quot;}}}&#39;</span><span class="w"> </span>-m<span class="w"> </span>nrepl.cmdline<span class="w"> </span>--middleware<span class="w"> </span><span class="s2">&quot;[cider.nrepl/cider-middleware]&quot;</span>
</code></pre></div>
<h2 id="passing-options-to-the-repl-jvm">Passing options to the REPL JVM</h2>
<p>There are times when Clojure debugging tools are not enough or not right for the job.
This is usually true when use an (open source) Java library and you want to set some breakpoints in Java code.
For those cases and others, you need to start the JVM in debug mode.</p>
<p>Typical use cases:</p>
<ul>
<li>Change Java logger configuration for the REPL via java system properties: e.g <code>-Dorg.slf4j.simpleLogger.defaultLogLevel=TRACE</code></li>
<li>Enable JVM debugger, change VM memory size, etc.</li>
</ul>
<p>Calva supports passing environment variables via <code>jackInEnv</code>.
You can set that option inside VSCode <code>settings.json</code> file.</p>
<p>You can configure global <code>settings.json</code> file or a project wide version, inside <code>&lt;project-root&gt;/.vscode/settings.json</code>.</p>
<p>Configuring the global option will impact all projects you work on using Calva, so be aware.
See <a href="https://code.visualstudio.com/docs/getstarted/settings">the documentation for <code>settings.json</code></a> for more information.</p>
<p>The bellow snippet configures <code>JAVA_TOOL_OPTIONS</code> environment variable.
We configure slf4j-simple logging level via a Java system property (<code>-D</code>) and JVM specific options (<code>-X</code>).</p>
<p>NOTE: You can of course pass other env variables here.</p>
<p>.vscode/settings.json</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;calva.jackInEnv&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;JAVA_TOOL_OPTIONS&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${env:JAVA_TOOL_OPTIONS} -Dorg.slf4j.simpleLogger.defaultLogLevel=TRACE -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=7896&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Once you saved the file, the next time you <code>Jack in</code> the project, this variable is read by the JVM and the configuration is applied accordingly.</p>
<p>You should see something like the message below in the Calva terminal output window:</p>
<div class="highlight"><pre><span></span><code>clojure<span class="w"> </span>-Sdeps<span class="w"> </span><span class="s1">&#39;{:deps {nrepl/nrepl {:mvn/version,&quot;0.8.3&quot;},cider/cider-nrepl {:mvn/version,&quot;0.26.0&quot;}}}&#39;</span><span class="w"> </span>-A:debug<span class="w"> </span>-m<span class="w"> </span>nrepl.cmdline<span class="w"> </span>--middleware<span class="w"> </span><span class="s2">&quot;[cider.nrepl/cider-middleware]&quot;</span>
Picked<span class="w"> </span>up<span class="w"> </span>JAVA_TOOL_OPTIONS:<span class="w">  </span>-Dorg.slf4j.simpleLogger.defaultLogLevel<span class="o">=</span>TRACE<span class="w"> </span>-Xdebug<span class="w"> </span>-Xrunjdwp:transport<span class="o">=</span>dt_socket,server<span class="o">=</span>y,suspend<span class="o">=</span>n,address<span class="o">=</span><span class="m">7896</span>
Listening<span class="w"> </span><span class="k">for</span><span class="w"> </span>transport<span class="w"> </span>dt_socket<span class="w"> </span>at<span class="w"> </span>address:<span class="w"> </span><span class="m">7896</span>
nREPL<span class="w"> </span>server<span class="w"> </span>started<span class="w"> </span>on<span class="w"> </span>port<span class="w"> </span><span class="m">46691</span><span class="w"> </span>on<span class="w"> </span>host<span class="w"> </span>localhost<span class="w"> </span>-<span class="w"> </span>nrepl://localhost:46691
</code></pre></div>


  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.share", "content.tabs.link"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>