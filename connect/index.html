
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="How to connect Calva to your project. You can either connect to a running application/REPL or start one (aka Jack-in)">
      
      
      
        <link rel="canonical" href="https://calva.io/connect/">
      
      
        <link rel="prev" href="../getting-started/">
      
      
        <link rel="next" href="../try-first/">
      
      
        
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.4+insiders-4.32.4">
    
    
      
        <title>Connect the REPL - Calva User Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f49c7df4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.6932e648.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-69796730-5","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Connect the REPL - Calva User Guide" >
      
        <meta  property="og:description"  content="How to connect Calva to your project. You can either connect to a running application/REPL or start one (aka Jack-in)" >
      
        <meta  property="og:image"  content="https://calva.io/assets/images/social/connect.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://calva.io/connect/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Connect the REPL - Calva User Guide" >
      
        <meta  name="twitter:description"  content="How to connect Calva to your project. You can either connect to a running application/REPL or start one (aka Jack-in)" >
      
        <meta  name="twitter:image"  content="https://calva.io/assets/images/social/connect.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#connect-calva-to-your-project" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Calva User Guide" class="md-header__button md-logo" aria-label="Calva User Guide" data-md-component="logo">
      
  <img src="../img/calva-symbol-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Calva User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Connect the REPL
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/BetterThanTomorrow/calva" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Calva
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Calva User Guide" class="md-nav__button md-logo" aria-label="Calva User Guide" data-md-component="logo">
      
  <img src="../img/calva-symbol-white.svg" alt="logo">

    </a>
    Calva User Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/BetterThanTomorrow/calva" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Calva
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Clojure Interactive Programming for Visual Studio Code
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Start Here
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Start Here
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Get Started with Calva
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    
  
    Connect the REPL
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    
  
    Connect the REPL
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#jack-in-let-calva-start-the-repl-for-you" class="md-nav__link">
    <span class="md-ellipsis">
      
        Jack-in: Let Calva Start the REPL For You
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Jack-in: Let Calva Start the REPL For You">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aliases-profiles-builds" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aliases, Profiles, Builds
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-jack-in" class="md-nav__link">
    <span class="md-ellipsis">
      
        Customizing Jack-in
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing Jack-in">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options-for-the-jack-in-command" class="md-nav__link">
    <span class="md-ellipsis">
      
        Options for the Jack-in Command
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-without-jack-in" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connecting Without Jack-in
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connecting Without Jack-in">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#customizing-connect" class="md-nav__link">
    <span class="md-ellipsis">
      
        Customizing Connect
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing Connect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options-for-the-connect-command" class="md-nav__link">
    <span class="md-ellipsis">
      
        Options for the Connect Command
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-repl-from-application-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Starting the REPL from application code?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-select-project-type-and-project-root" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auto-select Project Type and Project Root
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monorepos-multiple-clojure-projects-in-one-workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Monorepos / multiple Clojure projects in one workspace
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shadow-cljs-in-full-stack-projects" class="md-nav__link">
    <span class="md-ellipsis">
      
        shadow-cljs in full stack projects
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="shadow-cljs in full stack projects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leiningen-shadow-cljs-middleware-issue" class="md-nav__link">
    <span class="md-ellipsis">
      
        Leiningen + shadow-cljs middleware issue
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-not-found-errors-when-jacking-in" class="md-nav__link">
    <span class="md-ellipsis">
      
        Command Not Found Errors When Jacking In
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go-to-definition-not-working-for-java-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Go to Definition Not Working for Java Definitions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables-are-not-readable-from-repl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables Are Not Readable From REPL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewing-the-communication-between-nrepl-and-calva" class="md-nav__link">
    <span class="md-ellipsis">
      
        Viewing the Communication Between nREPL and Calva
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../try-first/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Try this First
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../finding-commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Finding Calva Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../eval-tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Evaluate Clojure Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../why-calva/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Why you should consider Calva
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../commands-top10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The Top 10 Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Evaluate Clojure Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../rich-comments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Rich Comments Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../clojuredocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    ClojureDocs Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../output/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The Output/REPL Window
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../formatting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Clojure Formatting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../paredit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Paredit, a Visual Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../debugger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Debugger
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pprint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Pretty Printing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../refactoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Refactoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../test-runner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Test Runner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../syntax-highlighting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Clojure Syntax Highlighting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../connect-sequences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Custom REPL Connect Sequences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../custom-commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Custom REPL Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../linting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Superb Clojure Linting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../namespace-form-auto-creation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Namespace Form Auto-creation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Clojure Notebooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../hiccup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Converting HTML to Hiccup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../clojure-lsp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    clojure-lsp
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../nrepl_and_cider-nrepl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    nREPL and cider-nrepl
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../customizing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Customizing Calva
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Using Calva with ...
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Using Calva with ...
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../wsl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    WSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../remote-development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    VS Code Remote Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../live-share/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Live Share
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../vim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    VIM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reveal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Reveal
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../babashka/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Babashka
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../nbb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    nbb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../joyride/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Joyride
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../clojuredart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    ClojureDart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../luminus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Luminus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../re-frame-template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The re-frame template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../polylith/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Polylith
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../krell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Krell
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../rebl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    REBL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../parinfer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Parinfer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Tips and Tricks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tips and Tricks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../emacs-keybindings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Emacs Keybindings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../workspace-layouts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Workspace Layouts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../quirks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Quirks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../async-out/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Viewing Async Output with Shadow-CLJS and Node
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../clj-java-decompiler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Add custom commands for decompiling generated Clojure code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Extension API
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    In Depth
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    In Depth
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../jack-in-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The Jack-in Academy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../get-started-with-clojure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Get Started with Clojure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../tao/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    The Tao of Calva
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Contribute to Calva
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../sponsors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Calva Sponsors
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../merch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Calva T-shirts and Stickers!
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#jack-in-let-calva-start-the-repl-for-you" class="md-nav__link">
    <span class="md-ellipsis">
      
        Jack-in: Let Calva Start the REPL For You
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Jack-in: Let Calva Start the REPL For You">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aliases-profiles-builds" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aliases, Profiles, Builds
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-jack-in" class="md-nav__link">
    <span class="md-ellipsis">
      
        Customizing Jack-in
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing Jack-in">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options-for-the-jack-in-command" class="md-nav__link">
    <span class="md-ellipsis">
      
        Options for the Jack-in Command
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-without-jack-in" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connecting Without Jack-in
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connecting Without Jack-in">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#customizing-connect" class="md-nav__link">
    <span class="md-ellipsis">
      
        Customizing Connect
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing Connect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options-for-the-connect-command" class="md-nav__link">
    <span class="md-ellipsis">
      
        Options for the Connect Command
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-repl-from-application-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Starting the REPL from application code?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-select-project-type-and-project-root" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auto-select Project Type and Project Root
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monorepos-multiple-clojure-projects-in-one-workspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Monorepos / multiple Clojure projects in one workspace
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shadow-cljs-in-full-stack-projects" class="md-nav__link">
    <span class="md-ellipsis">
      
        shadow-cljs in full stack projects
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="shadow-cljs in full stack projects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leiningen-shadow-cljs-middleware-issue" class="md-nav__link">
    <span class="md-ellipsis">
      
        Leiningen + shadow-cljs middleware issue
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-not-found-errors-when-jacking-in" class="md-nav__link">
    <span class="md-ellipsis">
      
        Command Not Found Errors When Jacking In
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go-to-definition-not-working-for-java-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Go to Definition Not Working for Java Definitions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables-are-not-readable-from-repl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables Are Not Readable From REPL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewing-the-communication-between-nrepl-and-calva" class="md-nav__link">
    <span class="md-ellipsis">
      
        Viewing the Communication Between nREPL and Calva
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="connect-calva-to-your-project">Connect Calva to Your Project</h1>
<p>When connected to your project's REPL Calva lets you evaluate code, supporting Interactive Programming. The REPL connection is also used to provide IDE functionality through the dynamic knowledge about the project that the REPL enables. The REPL communication depends on that your project has an <a href="https://github.com/nrepl/nrepl">nREPL</a> server running, and that the <a href="https://github.com/clojure-emacs/cider-nrepl">cider-nrepl</a> middleware is enabled.</p>
<p>For the easiest way to provide your project with these dependencies, the recommended way to connect is to use the so called <strong>Jack-in</strong> command.</p>
<h2 id="jack-in-let-calva-start-the-repl-for-you">Jack-in: Let Calva Start the REPL For You</h2>
<p>This way Calva can make sure it is started with the dependencies needed for a working Clojure and/or ClojureScript session. This is often referred to as <strong>Jack in</strong> (because that is what it is called in CIDER).</p>
<p>Jack-in supports both CLJ and for CLJS, and has built-in configurations for <strong>Leiningen</strong>, <strong>deps.edn</strong>, <strong>shadow-cljs</strong>, <strong>Gradle</strong> projects, as well as for the CLJS repl types: <strong>Figwheel Main</strong>, <strong>lein-figwheel</strong> (legacy Figwheel), <strong>shadow-cljs</strong>, and ClojureScript built-ins for both browser and node.js. Using jack-in provides your development environment with all the dependencies you need for Calva to work.</p>
<p>It works like so:</p>
<ol>
<li>Open your project in VS Code.</li>
<li>Issue the command <strong>Start a Project REPL and Connect</strong>: <code>ctrl+alt+c ctrl+alt+j</code>.</li>
<li>Answer the quick-pick prompts telling Calva about project types and what profiles to start. (See the <a href="https://github.com/BetterThanTomorrow/calva/wiki/Jack-In-Project-Types-and-Profiles">Jack-in Project Types and Profiles</a> wiki page for more info if needed.)</li>
</ol>
<p>See also: <a href="../workspace-layouts/">Workspace Layouts</a></p>
<div class="admonition note">
<p class="admonition-title">About project roots</p>
<p>You must have a project file, such as <code>project.clj</code> for Leiningen, or <code>deps.edn</code> for deps.edn, or <code>shadow-cljs.edn</code> for shadow-cljs, or <code>settings.gradle</code>/<code>settings.gradle.kts</code> for Gradle in the directory opened in VS Code in order for jack-in to work. If, after adding the project file, you experience an error during jack-in that says something could not be located, make sure you have the correct dependencies in your project file. For example, when using the <strong>Figwheel Main</strong> project type, you should have <code>com.bhauman/figwheel-main</code> in your project dependencies.</p>
<p>See also below, regarding <a href="#monorepos-multiple-clojure-projects-in-one-workspace">multiple projects in a workspace</a></p>
</div>
<h3 id="aliases-profiles-builds">Aliases, Profiles, Builds</h3>
<p>When Jack-in starts it will depend on the project type, and whether ClojureScript is involved or not, and if it is, what kind of ClojureScript project, what will happen next. Calva will analyze the project files and will then give you prompts with selections based on what is found there.</p>
<p>You will need some basic knowledge about the project and the project type terminologies to answer the prompts.</p>
<p>There are ways to tell Calva the answers to these prompts beforehand, so that Jack-in can be a zero-prompting command. Read on.</p>
<h3 id="customizing-jack-in">Customizing Jack-in</h3>
<p>The main mechanism for customizing your Jack-in, including automating menu selections, and custom CLJS REPL types is <a href="../connect-sequences/">Custom Connect Sequences</a>.</p>
<p>There are also these settings:</p>
<ul>
<li><code>calva.jackInEnv</code>: An object with environment variables that will be added to the environment of the Jack-in process.</li>
<li><code>calva.myCljAliases</code>: An array of <code>deps.edn</code> aliases not found in the project file. Use this to tell Calva Jack-in to launch your REPL using your user defined aliases.</li>
<li><code>calva.myLeinProfiles</code>: An array of Leiningen profiles not found in <code>project.clj</code>. Use this to tell Calva Jack-in to launch your REPL using your user defined profiles.</li>
<li><code>calva.openBrowserWhenFigwheelStarted</code>: <em>For Legacy Figwheel only.</em> A boolean controlling if Calva should automatically launch your ClojureScript app, once it is compiled by Figwheel. Defaults to <code>true</code>.</li>
<li><code>calva.depsEdnJackInExecutable</code>: A string which should either be <code>clojure</code> or <code>deps.clj</code>, or <code>clojure or deps.clj</code> (default). It determines which executable Calva Jack-in should use for starting a <code>deps.edn</code> project. With this setting at its default, <code>clojure or deps.clj</code>, Calva will test if the <code>clojure</code> executable works, and use it if it does, otherwise <code>deps.clj</code> will be used, which is bundled with Calva.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When processing the <code>calva.jackInEnv</code> setting you can refer to existing ENV variables with <code>${env:VARIABLE}</code>.</p>
</div>
<h4 id="options-for-the-jack-in-command">Options for the Jack-in Command</h4>
<p>The <code>calva.jackIn</code> command takes an optional options argument defined like so:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nx">options</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">connectSequence?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">ReplConnectSequence</span><span class="p">;</span>
<span class="w">    </span><span class="nx">disableAutoSelect?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>Where <code>ReplConnectSequence</code> is a <a href="../connect-sequences/">Connect Sequences</a>. If you provide a string it needs to match against a built-in or custom connect sequence. With <code>disableAutoSelect</code> you can force the jack-in menus to be provided even if a custom connect sequence is set to be autoSelected.</p>
<p>You can provide these options from keyboard shortcuts or from <a href="https://github.com/BetterThanTomorrow/joyride">Joyride</a> scripts.</p>
<p>Here's a keyboard shortcut for connecting to a running REPL bypassing any connect sequence with <code>autoSelectForConnect</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;calva.jackIn&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;disableAutoSelect&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ctrl+alt+c shift+j&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
</code></pre></div>
<p>A Joyride command for starting a <code>deps.edn</code> REPL for a project in the root of the workspace.</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="nf">vscode/commands.executeCommand</span>
<span class="w"> </span><span class="s">&quot;calva.jackIn&quot;</span>
<span class="w"> </span><span class="p">(</span><span class="nf">clj-&gt;js</span><span class="w"> </span><span class="p">{</span><span class="ss">:connectSequence</span><span class="w"> </span><span class="p">{</span><span class="ss">:projectType</span><span class="w"> </span><span class="s">&quot;deps.edn&quot;</span>
<span class="w">                             </span><span class="ss">:projectRootPath</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;.&quot;</span><span class="p">]}}))</span>
</code></pre></div>
<p>It will prompt for any aliases it finds in the <code>deps.edn</code> file.    </p>
<h2 id="connecting-without-jack-in">Connecting Without Jack-in</h2>
<p>If, for whatever reasons, you can't use Jack-in with your project (possibly because the REPL is started as part of some other job) all is not lost. Old fashioned <strong>Connect to a running REPL</strong> is still there for you. For all features to work in Calva while connecting to a running REPL, your environment needs to have REPL related dependencies set up.</p>
<p>However, just as before it can be tricky to get the dependencies right. Consider using <strong>Jack in</strong> to inform yourself on how to start your REPL to Calva's satisfaction. When you use Jack in, Calva starts a VS Code task for it and the command line used is displayed in the terminal pane used to handle the task. Reading that command line tells you what dependencies are needed for your project.</p>
<p>Even better: Copying that command line gives you the command to start the REPL with the correct dependencies.</p>
<p>All this said, I still recommend you challenge the conclusion that you can't use Jack-in.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a Calva command for copying the Jack-in command line to the clipboard.</p>
</div>
<h3 id="customizing-connect">Customizing Connect</h3>
<p>If there is an nRepl port file, Calva will use it and not prompt for <code>host:port</code> when connecting. You can make Calva prompt for this by setting the boolean config <code>calva.autoSelectNReplPortFromPortFile</code> to <code>false</code>.</p>
<p>With the setting <code>calva.autoConnectRepl</code> you can make Calva automatically connect the REPL if there is an nRepl port file present when the project is opened.</p>
<p>With this and the below mentioned auto-select options you can make connect a prompt-less experience. See: <a href="../connect-sequences/">Connect Sequences</a>.</p>
<h4 id="options-for-the-connect-command">Options for the Connect Command</h4>
<p>The <code>calva.connect</code> command takes an optional options argument defined like so:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nx">options</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">host?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">port?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">connectSequence?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">ReplConnectSequence</span><span class="p">;</span>
<span class="w">    </span><span class="nx">disableAutoSelect?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<p>Where <code>ReplConnectSequence</code> is a <a href="../connect-sequences/">Connect Sequences</a>. If you provide a string it needs to match against a built-in or custom connect sequence. With <code>disableAutoSelect</code> you can force the connect menus to be provided even if a custom connect sequence is set to be autoSelected.</p>
<p>You can provide these options from keyboard shortcuts or from <a href="https://github.com/BetterThanTomorrow/joyride">Joyride</a> scripts.</p>
<p>Here's a keyboard shortcut for connecting to a running REPL bypassing any connect sequence with <code>autoSelectForConnect</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;calva.connect&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;disableAutoSelect&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ctrl+alt+c shift+c&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
</code></pre></div>
<p>A Joyride command for connecting to a REPL on port 55555, without being asked for project type:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="nf">vscode/commands.executeCommand</span><span class="w"> </span><span class="s">&quot;calva.connect&quot;</span><span class="w"> </span><span class="p">(</span><span class="nf">clj-&gt;js</span><span class="w"> </span><span class="p">{</span><span class="ss">:port</span><span class="w"> </span><span class="s">&quot;55555&quot;</span><span class="w"> </span><span class="ss">:connectSequence</span><span class="w"> </span><span class="s">&quot;Generic&quot;</span><span class="p">}))</span>
</code></pre></div>
<h3 id="starting-the-repl-from-application-code">Starting the REPL from application code?</h3>
<p>If your project is setup so that the REPL server is started by the application code, you will need to get the cider-nrepl middleware in place. See the cider-nrepl docs about <a href="https://docs.cider.mx/cider-nrepl/usage.html#via-embedding-nrepl-in-your-application">embedding nREPL in your application</a>.</p>
<h2 id="auto-select-project-type-and-project-root">Auto-select Project Type and Project Root</h2>
<p>You can make both Jack-in and Connect stop prompting you for project type and project root path in projects where you always want to use the same. See <a href="../connect-sequences/">Connect Sequences</a>.</p>
<h2 id="monorepos-multiple-clojure-projects-in-one-workspace">Monorepos / multiple Clojure projects in one workspace</h2>
<p>If the workspace is a monorepo, Polylith repo or just a repository with more than one Clojure project, Calva will start the connect sequence with prompting for which project to start/connect to.</p>
<p><img alt="The project roots menu" src="../images/calva-monorepo-project-roots-menu.png" /></p>
<p>When searching for project roots in your workspace, Calva will glob for all files matching <code>project.clj</code>, <code>deps.edn</code>, or <code>shadow-cljs.edn</code>. This is done using VS Code's workspace search engine, and is very efficient. However, in a large monorepo, it is still a substantial task. In order to not waste resources Calva will exclude any directories in the setting <code>calva.projectRootsSearchExclude</code>. </p>
<p><img alt="calva.projectRootsSearchExclude setting" src="../images/calva-project-roots-search-exclude.png" /></p>
<div class="admonition note">
<p class="admonition-title">Exclude entry globs</p>
<p>Each entry is a partial <em>glob</em> and will be part of a resulting <em>glob</em> of the form <code>**/{glob1,glob2,...,globN}</code>. This means that all directories in the workspace matching an entry will be excluded, regardless of where in the workspace they reside.</p>
</div>
<h2 id="shadow-cljs-in-full-stack-projects">shadow-cljs in full stack projects</h2>
<p>shadow-cljs is a bit special in regards to Calva REPL connection. Mainly because you can start shadow-cljs and it's nREPL server in two ways:</p>
<ol>
<li>Using the shadow-cljs npm executable</li>
<li>Via the Clojure REPL in your Leiningen or deps.edn project</li>
</ol>
<p>These options show up as <strong>project types</strong> when connecting or jacking in:</p>
<ol>
<li>Project type: <strong>shadow-cljs</strong></li>
<li>Project type: <strong>deps.edn + shadow-cljs</strong> or <strong>Leiningen + shadow-cljs</strong></li>
</ol>
<p><strong>NB</strong>: Unless you have good reasons, use the <strong>shadow-cljs</strong> project type and configure shadow-cljs to use deps.edn or Leiningen for source paths, and for dependency resolution.</p>
<p>Although the other project types work, the wiring is different. When the npm shadow-cljs executable is used, it outputs both shadow-cljs and Clojure related messages in the Jack-in terminal. Whereas when started from Clojure most shadow-cljs output ends up in the Output/REPL window. This gets extra important if you have shadow-cljs tests running automatically.</p>
<h3 id="leiningen-shadow-cljs-middleware-issue">Leiningen + shadow-cljs middleware issue</h3>
<p>Please note that for Leiningen, <a href="https://codeberg.org/leiningen/leiningen/issues/10">the command line dependency injection of the shadow-cljs nrepl middleware doesn't work</a>. You need to add it to your <code>project.clj</code>:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="ss">:repl-options</span><span class="w"> </span><span class="p">{</span><span class="ss">:nrepl-middleware</span><span class="w"> </span><span class="p">[</span><span class="nv">shadow.cljs.devtools.server.nrepl/middleware</span><span class="p">]}</span>
</code></pre></div>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="command-not-found-errors-when-jacking-in">Command Not Found Errors When Jacking In</h3>
<p>If you get <code>command not found</code> error when Calva tries to start your project, and you know you have the command installed, it's probably because VS Code starts from an environment where the command is not on the <code>$PATH</code>. It can look like so:</p>
<div class="highlight"><pre><span></span><code>lein<span class="w"> </span>update-in<span class="w"> </span>:dependencies<span class="w"> </span>conj<span class="w"> </span><span class="s1">&#39;[nrepl,&quot;0.8.3&quot;]&#39;</span><span class="w"> </span>--<span class="w"> </span>update-in<span class="w"> </span>:plugins<span class="w"> </span>conj<span class="w"> </span><span class="s1">&#39;[cider/cider-nrepl,&quot;0.25.8&quot;]&#39;</span><span class="w"> </span>--<span class="w"> </span>update-in<span class="w"> </span><span class="s1">&#39;[:repl-options,:nrepl-middleware]&#39;</span><span class="w"> </span>conj<span class="w"> </span><span class="s1">&#39;[&quot;cider.nrepl/cider-middleware&quot;]&#39;</span><span class="w"> </span>--<span class="w"> </span>repl<span class="w"> </span>:headless
/bin/sh:<span class="w"> </span>lein:<span class="w"> </span><span class="nb">command</span><span class="w"> </span>not<span class="w"> </span>found
Jack-in<span class="w"> </span>process<span class="w"> </span>exited.<span class="w"> </span>Status:<span class="w"> </span><span class="m">127</span>
</code></pre></div>
<p>The fix is to always start VS Code from the command line:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>code
</code></pre></div>
<p>You might need to first run the <strong>Shell Command: Install <code>code</code> command in PATH</strong>.</p>
<p>This will also make sure your REPL has access to the environment you probably expect it to have access to. See below.</p>
<h3 id="go-to-definition-not-working-for-java-definitions">Go to Definition Not Working for Java Definitions</h3>
<p>On some systems, the Java source may not be installed along with the JDK. The source must be present on your system in order to navigate to Java definitions. See <a href="https://github.com/clojure-emacs/orchard/issues/103#issuecomment-764936527">this comment</a> for more details.</p>
<h3 id="environment-variables-are-not-readable-from-repl">Environment Variables Are Not Readable From REPL</h3>
<p>If you've added environment variables in your OS, such as in your <code>~/.bashrc</code> file (Linux), in order for them to be read in a REPL created by Calva's jackin command, VS Code must be started from a shell where the environment variables are defined. For example, if you can open a bash terminal and run <code>echo $SOME_VAR</code> and see the value there, then open VS Code from that terminal with <code>code &lt;project path&gt;</code>.</p>
<h3 id="viewing-the-communication-between-nrepl-and-calva">Viewing the Communication Between nREPL and Calva</h3>
<p>It may be helpful to view the messages sent between nREPL and Calva when troubleshooting an issue related to the REPL. See how to do that <a href="../nrepl_and_cider-nrepl/#viewing-the-communication-between-calva-and-nrepl">here</a>.</p>

  
  



  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.tabs.link"], "search": "../assets/javascripts/workers/search.6c7302c4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a3190745.min.js"></script>
      
    
  </body>
</html>